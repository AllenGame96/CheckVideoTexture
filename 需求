产品需求文档（PRD）
开发一个工具，用于对录制视频进行检测，自动判断以下明度规范是否达标：

障碍（Obstacle） ↔ 地板（Floor）
明度差 ≥ 10%
地板（Floor） ↔ 背景（Background）
明度差 ≥ 20%
并提供明确的数值结果与不合格提示。

5.1 地板（Floor）
定义：

角色（球）下方、可行走的方格平台
连续、规则的平面区域
判定原则：

位于画面中部或偏下
规则形状（方格、路径）
角色始终位于其上方
5.2 障碍（Obstacle）
定义：

位于地板上方
会影响玩家判断或路径的物体
不包含角色本体
示例：

悬浮物
植物、柱状物
宝石、装饰性立体物
5.3 背景（Background）
定义：

除地板、障碍、角色以外的所有区域
中远景、环境装饰、空间背景
5.4 角色（球）
角色本体 不参与任何明度计算
工具需在计算中自动排除该区域

6 视频模式（第一阶段）
✅ 首帧标注 + 自动跟踪

用户在首帧标注：
地板区域
障碍区域
背景区域
工具使用区域跟踪方式（如光流）：
将标注区域传播到后续帧
对视频进行抽帧检测（如 1–5 fps）
不要求 100% 逐帧检测，重点在规范验证而非实时分析

7. 明度（Value）计算规范
7.1 明度计算公式
采用基于人眼感知的亮度模型：

Value = 0.2126 × R + 0.7152 × G + 0.0722 × B
R / G / B 范围：0–255
Value 输出范围：0–255
7.2 区域代表值
默认使用：中位数（Median）
目的：避免局部高亮或阴影干扰
8. 明度差计算与判定
8.1 明度差计算公式
明度差 (%) = |V1 - V2| / 255 × 100%
8.2 判定标准
对比区域	合格标准
障碍 ↔ 地板	≥ 10%
地板 ↔ 背景	≥ 20%
9. 视频检测规则
视频将被抽帧处理
每帧独立计算明度差
输出：
最低明度差帧（Worst Frame）
对应时间戳
是否存在不合格帧

10. 输出结果
10.1 数值结果（必须）
地板明度值
障碍明度值
背景明度值
两组明度差百分比
✅ 合格 / ❌ 不合格状态
10.2 可视化结果（推荐）
灰度（Value）预览图
区域高亮显示
不合格项红色警示

注意：做一个web的网站，注意视频抽帧检测